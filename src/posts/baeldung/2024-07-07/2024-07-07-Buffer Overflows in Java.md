---
date: 2022-04-01
category:
  - Java
  - Security
tag:
  - Buffer Overflow
  - Java Security
head:
  - - meta
    - name: keywords
      content: Java, Buffer Overflow, Security, JVM, JNI
---
# Java中的缓冲区溢出

在这篇文章中，我们将看到什么是缓冲区溢出以及它对我们系统构成的威胁。此外，我们还将看到Java对缓冲区溢出的处理方式。

## 1. 概述

## 2. 什么是缓冲区溢出？

缓冲区是RAM中用于存储临时数据的一部分。对于给定的程序，缓冲区大小通常是固定的。但如果程序尝试写入超过分配内存的数据会发生什么？这通常会导致缓冲区溢出。简单来说，**缓冲区溢出指的是程序将内容写入缓冲区之外的内存**（由于溢出）。缓冲区溢出可能导致意外行为以及软件安全威胁。

## 3. Java的安全机制和特殊情况

在C和C++等语言中，缓冲区溢出很常见。在这些语言中，有意或无意地覆盖内存很容易。然而，许多流行的语言已经采取了防范缓冲区溢出场景的措施。**对于Java的特定情况，使用字符数组可以防止缓冲区溢出**。

由于使用数组需要检查数组界限，Java可以确保内存安全。Java不允许访问超出分配缓冲区内存的范围。通过这种方式，它防止了缓冲区溢出。如果程序尝试访问超出分配空间的内存，Java将抛出一个_ArrayOutOfBounds_异常。更详细的描述可以在《十年来最脆弱的缓冲区溢出：攻击与防御》中找到。

尽管上述安全机制，Java中仍然可能经历缓冲区溢出。这是由于JVM实现的原因，而不是核心Java。我们下面将介绍两种情况。

### 3.1. JVM使用C++

C++是容易覆盖内存并导致缓冲区溢出的语言之一。**由于JVM是用C++编写的，因此在程序执行期间理论上可能会发生缓冲区溢出场景**。由于JVM由各个供应商提供，有可能某个供应商的实现可能导致缓冲区溢出。然而，**在现实世界中这种情况非常不可能发生**。

### 3.2. 使用Java本地接口（JNI）

**JNI允许Java程序与可能用C或C++编写的本地程序互操作**。由于像C和C++这样的语言是不安全的，通过Java本地接口引起缓冲区溢出是可能的。在这种情况下，需要注意的是，漏洞的来源不是Java，而是C或C++。

## 4. 结论

在这篇文章中，我们看到了什么是缓冲区溢出以及Java通过使用数组界限检查对其有相当的防范措施。我们看到，由于使用本地代码，Java本地接口（JNI）可能导致缓冲区溢出。