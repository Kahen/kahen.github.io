import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,o as n,a as i}from"./app-C5QtKXnb.js";const a={},o=i(`<h1 id="spring-boot-错误-applicationcontextexception-baeldung" tabindex="-1"><a class="header-anchor" href="#spring-boot-错误-applicationcontextexception-baeldung"><span>Spring Boot 错误 ApplicationContextException | Baeldung</span></a></h1><p>在本快速教程中，我们将仔细研究 Spring Boot 错误 &quot;ApplicationContextException: 由于缺少 ServletWebServerFactory bean 而无法启动 ServletWebServerApplicationContext&quot;。首先，我们将阐明此错误的背后主要原因。然后，我们将通过一个实际示例深入探讨如何重现它，以及如何解决它。</p><h2 id="_1-概述" tabindex="-1"><a class="header-anchor" href="#_1-概述"><span>1. 概述</span></a></h2><h2 id="_2-可能的原因" tabindex="-1"><a class="header-anchor" href="#_2-可能的原因"><span>2. 可能的原因</span></a></h2><p>首先，让我们尝试理解错误消息的含义。&quot;由于缺少 ServletWebServerFactory bean 而无法启动 ServletWebServerApplicationContext&quot; 已经说明了一切。它简单地告诉我们，在 ApplicationContext 中没有配置 ServletWebServerFactory bean。</p><p>当 Spring Boot 无法启动 ServletWebServerApplicationContext 时，通常会出现此错误。为什么？因为 ServletWebServerApplicationContext 使用包含的 ServletWebServerFactory bean 来自举。</p><p>通常，Spring Boot 提供 SpringApplication.run 方法来启动 Spring 应用程序。</p><p>SpringApplication 类将尝试为我们创建正确的 ApplicationContext，<strong>取决于我们是否正在开发 Web 应用程序</strong>。</p><p>例如，用于确定 Web 应用程序的算法来自一些依赖项，如 spring-boot-starter-web。话虽如此，缺少这些依赖项可能是我们错误背后的一个原因。</p><p>另一个原因可能是 Spring Boot 入口类中缺少 @SpringBootApplication 注解。</p><h2 id="_3-重现错误" tabindex="-1"><a class="header-anchor" href="#_3-重现错误"><span>3. 重现错误</span></a></h2><p>现在，让我们看一个我们可以产生 Spring Boot 错误的示例。实现这一点的最简单方法是 <strong>创建一个没有 @SpringBootApplication 注解的主类</strong>。</p><p>首先，让我们创建一个入口类，并故意忘记用 @SpringBootApplication 注解：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>public class MainEntryPoint {
    public static void main(String[] args) {
        SpringApplication.run(MainEntryPoint.class, args);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在，让我们运行我们的示例 Spring Boot 应用程序，看看会发生什么：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>22:20:39.134 [main] ERROR o.s.boot.SpringApplication - 应用程序运行失败
org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.
    ...
    at com.baeldung.applicationcontextexception.MainEntryPoint.main(MainEntryPoint.java:10)
Caused by: org.springframework.context.ApplicationContextException: Unable to start ServletWebServerApplicationContext due to missing ServletWebServerFactory bean.
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getWebServerFactory(ServletWebServerApplicationContext.java:209)
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:179)
    ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如上所示，我们得到了 &quot;ApplicationContextException: 由于缺少 ServletWebServerFactory bean 而无法启动 ServletWebServerApplicationContext&quot; 错误。</p><h2 id="_4-修复错误" tabindex="-1"><a class="header-anchor" href="#_4-修复错误"><span>4. 修复错误</span></a></h2><p>修复我们错误的简单解决方案是使用 @SpringBootApplication 注解我们的 MainEntryPoint 类。</p><p>通过使用此注解，<strong>我们告诉 Spring Boot 自动配置必要的 beans 并将它们注册到上下文中</strong>。</p><p>同样，我们可以通过禁用 Web 环境来避免非 Web 应用程序的错误。为此，我们可以使用 spring.main.web-application-type 属性。</p><p>在 application.properties 中：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>spring.main.web-application-type=none
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>同样，在 application.yml 中：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>spring:
    main:
        web-application-type: none
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>none 意味着应用程序不应作为 Web 应用程序运行。它用于禁用 Web 服务器</strong>。</p><p>请记住，从 Spring Boot 2.0 开始，我们还可以使用 SpringApplicationBuilder 明确定义特定类型的 Web 应用程序：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>@SpringBootApplication
public class MainClass {
    public static void main(String[] args) {
        new SpringApplicationBuilder(MainClass.class)
          .web(WebApplicationType.NONE)
          .run(args);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>对于 WebFlux 项目，我们可以使用 WebApplicationType.REACTIVE。</strong> 另一种解决方案可能是排除 spring-webmvc 依赖项。</p><p>此依赖项在类路径上的存在告诉 Spring Boot 将项目视为 Servlet 应用程序，而不是响应式 Web 应用程序。因此，Spring Boot 无法启动 ServletWebServerApplicationContext。</p><h2 id="_5-结论" tabindex="-1"><a class="header-anchor" href="#_5-结论"><span>5. 结论</span></a></h2><p>在这篇短文中，我们详细讨论了什么导致 Spring Boot 在启动时出现此错误：&quot;ApplicationContextException: 由于缺少 ServletWebServerFactory bean 而无法启动 ServletWebServerApplicationContext&quot;。</p><p>在此过程中，我们通过一个实际示例解释了如何产生错误以及如何修复它。</p><p>如往常一样，示例的完整源代码可在 GitHub 上获取。翻译已经完成，以下是剩余部分的翻译：</p><h2 id="_5-结论-1" tabindex="-1"><a class="header-anchor" href="#_5-结论-1"><span>5. 结论</span></a></h2><p>在这篇简短的文章中，我们详细讨论了 Spring Boot 在启动时出现此错误的原因：&quot;ApplicationContextException: 由于缺少 ServletWebServerFactory bean 而无法启动 ServletWebServerApplicationContext&quot;。</p><p>通过实际示例，我们解释了如何产生这个错误以及如何修复它。</p><p>如常，示例的完整源代码可以在 GitHub 上找到。</p><p><a href="kimi://action?name=cheer-on-kimi">给Kimi加油</a></p><p><img src="https://www.baeldung.com/wp-content/themes/baeldung/icon/logo.svg" alt="img" loading="lazy"> <img src="https://secure.gravatar.com/avatar/9a8dd50c78e0b9d049466e9097331198?s=50&amp;r=g" alt="img" loading="lazy"> <img src="https://secure.gravatar.com/avatar/66d236ad2fbffe8cfd463ebd2b4a43c0?s=50&amp;r=g" alt="img" loading="lazy"> <img src="https://www.baeldung.com/wp-content/uploads/2022/04/announcement-icon.png" alt="img" loading="lazy"> <img src="https://www.baeldung.com/wp-content/uploads/2016/05/baeldung-rest-post-footer-main-1.2.0.jpg" alt="img" loading="lazy"> <img src="https://www.baeldung.com/wp-content/uploads/2016/05/baeldung-rest-post-footer-icn-1.0.0.png" alt="img" loading="lazy"></p><p>OK</p>`,41),r=[o];function p(l,c){return n(),t("div",null,r)}const g=e(a,[["render",p],["__file","2024-07-29-Spring Boot Error ApplicationContextException.html.vue"]]),v=JSON.parse('{"path":"/posts/baeldung/2024-07-29/2024-07-29-Spring%20Boot%20Error%20ApplicationContextException.html","title":"Spring Boot 错误 ApplicationContextException | Baeldung","lang":"zh-CN","frontmatter":{"date":"2022-04-01T00:00:00.000Z","category":["Spring Boot","Error Handling"],"tag":["ApplicationContextException","ServletWebServerFactory"],"head":[["meta",{"name":"keywords","content":"Spring Boot, ApplicationContextException, ServletWebServerFactory, error handling"}],["meta",{"property":"og:url","content":"https://www.kahen.xyz/posts/baeldung/2024-07-29/2024-07-29-Spring%20Boot%20Error%20ApplicationContextException.html"}],["meta",{"property":"og:site_name","content":"Baeldung 中文网"}],["meta",{"property":"og:title","content":"Spring Boot 错误 ApplicationContextException | Baeldung"}],["meta",{"property":"og:description","content":"Spring Boot 错误 ApplicationContextException | Baeldung 在本快速教程中，我们将仔细研究 Spring Boot 错误 \\"ApplicationContextException: 由于缺少 ServletWebServerFactory bean 而无法启动 ServletWebServerApplic..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://www.baeldung.com/wp-content/themes/baeldung/icon/logo.svg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-29T09:07:25.000Z"}],["meta",{"property":"article:author","content":"Kahen"}],["meta",{"property":"article:tag","content":"ApplicationContextException"}],["meta",{"property":"article:tag","content":"ServletWebServerFactory"}],["meta",{"property":"article:published_time","content":"2022-04-01T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-29T09:07:25.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Spring Boot 错误 ApplicationContextException | Baeldung\\",\\"image\\":[\\"https://www.baeldung.com/wp-content/themes/baeldung/icon/logo.svg\\",\\"https://secure.gravatar.com/avatar/9a8dd50c78e0b9d049466e9097331198?s=50&r=g\\",\\"https://secure.gravatar.com/avatar/66d236ad2fbffe8cfd463ebd2b4a43c0?s=50&r=g\\",\\"https://www.baeldung.com/wp-content/uploads/2022/04/announcement-icon.png\\",\\"https://www.baeldung.com/wp-content/uploads/2016/05/baeldung-rest-post-footer-main-1.2.0.jpg\\",\\"https://www.baeldung.com/wp-content/uploads/2016/05/baeldung-rest-post-footer-icn-1.0.0.png\\"],\\"datePublished\\":\\"2022-04-01T00:00:00.000Z\\",\\"dateModified\\":\\"2024-07-29T09:07:25.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Kahen\\",\\"url\\":\\"https://www.kahen.xyz\\"}]}"]],"description":"Spring Boot 错误 ApplicationContextException | Baeldung 在本快速教程中，我们将仔细研究 Spring Boot 错误 \\"ApplicationContextException: 由于缺少 ServletWebServerFactory bean 而无法启动 ServletWebServerApplic..."},"headers":[{"level":2,"title":"1. 概述","slug":"_1-概述","link":"#_1-概述","children":[]},{"level":2,"title":"2. 可能的原因","slug":"_2-可能的原因","link":"#_2-可能的原因","children":[]},{"level":2,"title":"3. 重现错误","slug":"_3-重现错误","link":"#_3-重现错误","children":[]},{"level":2,"title":"4. 修复错误","slug":"_4-修复错误","link":"#_4-修复错误","children":[]},{"level":2,"title":"5. 结论","slug":"_5-结论","link":"#_5-结论","children":[]},{"level":2,"title":"5. 结论","slug":"_5-结论-1","link":"#_5-结论-1","children":[]}],"git":{"createdTime":1722244045000,"updatedTime":1722244045000,"contributors":[{"name":"Kahen","email":"Kahen@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":3.42,"words":1027},"filePathRelative":"posts/baeldung/2024-07-29/2024-07-29-Spring Boot Error ApplicationContextException.md","localizedDate":"2022年4月1日","excerpt":"\\n<p>在本快速教程中，我们将仔细研究 Spring Boot 错误 \\"ApplicationContextException: 由于缺少 ServletWebServerFactory bean 而无法启动 ServletWebServerApplicationContext\\"。首先，我们将阐明此错误的背后主要原因。然后，我们将通过一个实际示例深入探讨如何重现它，以及如何解决它。</p>\\n<h2>1. 概述</h2>\\n<h2>2. 可能的原因</h2>\\n<p>首先，让我们尝试理解错误消息的含义。\\"由于缺少 ServletWebServerFactory bean 而无法启动 ServletWebServerApplicationContext\\" 已经说明了一切。它简单地告诉我们，在 ApplicationContext 中没有配置 ServletWebServerFactory bean。</p>","autoDesc":true}');export{g as comp,v as data};
