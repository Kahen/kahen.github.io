import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,o as s,a as t}from"./app-COjxGN00.js";const e={},p=t('<hr><h1 id="maven中移除重复依赖" tabindex="-1"><a class="header-anchor" href="#maven中移除重复依赖"><span>Maven中移除重复依赖</span></a></h1><p>在本教程中，我们将学习如何使用Maven命令在_pom.xml_中检测重复依赖。我们还将看到如何使用Maven Enforcer插件在存在重复依赖时使构建失败。</p><h2 id="_1-概述" tabindex="-1"><a class="header-anchor" href="#_1-概述"><span>1. 概述</span></a></h2><h2 id="_2-为什么要检测重复依赖" tabindex="-1"><a class="header-anchor" href="#_2-为什么要检测重复依赖"><span>2. 为什么要检测重复依赖？</span></a></h2><p>在_pom.xml_中存在重复依赖的风险是，目标库的最新版本可能不会应用到我们项目的构建路径中。例如，考虑以下_pom.xml_：</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code>``<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span><span class="token punctuation">&gt;</span></span>``\n  [...]\n  `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>`\n    ``<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>``\n      ```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>```org.apache.commons```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>```\n      ```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>```commons-lang3```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>```\n      ```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>```3.12.0```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>```\n    ``<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>``\n    ``<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>``\n      ```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>```org.apache.commons```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>```\n      ```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>```commons-lang3```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>```\n      ```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>```3.11```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>```\n    ``<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>``\n  `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>`\n  [...]\n``<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>``\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如我们所见，相同的库_commons-lang3_有两个依赖，但这两个依赖的版本不同。</p><p>接下来，让我们看看如何使用Maven命令来检测这些重复依赖。</p><h2 id="_3-依赖树命令" tabindex="-1"><a class="header-anchor" href="#_3-依赖树命令"><span>3. 依赖树命令</span></a></h2><p>让我们在终端中运行命令_mvn dependency:tree_并查看输出。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ mvn dependency:tree\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Scanning <span class="token keyword">for</span> projects<span class="token punctuation">..</span>.\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> Some problems were encountered <span class="token keyword">while</span> building the effective model <span class="token keyword">for</span> com.baeldung:maven-duplicate-dependencies:jar:0.0.1-SNAPSHOT\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> <span class="token string">&#39;dependencies.dependency.(groupId:artifactId:type:classifier)&#39;</span> must be unique: org.apache.commons:commons-lang3:jar -<span class="token operator">&gt;</span>\nversion <span class="token number">3.12</span>.0 vs <span class="token number">3.11</span> @ line <span class="token number">14</span>, <span class="token function">column</span> <span class="token number">15</span>\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> It is highly recommended to fix these problems because they threaten the stability of your build.\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> For this reason, future Maven versions might no longer support building such malformed projects.\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> -------------\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building maven-duplicate-dependencies <span class="token number">0.0</span>.1-SNAPSHOT\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --------------------------------<span class="token punctuation">[</span> jar <span class="token punctuation">]</span>---------------------------------\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-dependency-plugin:2.8:tree <span class="token punctuation">(</span>default-cli<span class="token punctuation">)</span> @ maven-duplicate-dependencies ---\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> The artifact xml-apis:xml-apis:jar:2.0.2 has been relocated to xml-apis:xml-apis:jar:1.0.b2\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> com.baeldung:maven-duplicate-dependencies:jar:0.0.1-SNAPSHOT\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">\\</span>- org.apache.commons:commons-lang3:jar:3.11:compile\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> BUILD SUCCESS\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Total time:  <span class="token number">1.136</span> s\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Finished at: <span class="token number">2021</span>-12-20T09:45:20+05:30\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这里，我们收到关于_pom.xml_中存在重复依赖的警告。我们还注意到，尽管存在更高版本的_3.12.0_，但_version 3.11_的_commons-lang3.jar_被添加到了项目中。<strong>这是因为Maven选择了在_pom.xml_中后出现的依赖。</strong></p><h2 id="_4-依赖analyze-duplicate命令" tabindex="-1"><a class="header-anchor" href="#_4-依赖analyze-duplicate命令"><span>4. 依赖analyze-duplicate命令</span></a></h2><p>现在让我们运行命令_mvn dependency:analyze-duplicate_并检查输出。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ mvn dependency:analyze-duplicate\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Scanning <span class="token keyword">for</span> projects<span class="token punctuation">..</span>.\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> Some problems were encountered <span class="token keyword">while</span> building the effective model <span class="token keyword">for</span> com.baeldung:maven-duplicate-dependencies:jar:0.0.1-SNAPSHOT\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> <span class="token string">&#39;dependencies.dependency.(groupId:artifactId:type:classifier)&#39;</span> must be unique: org.apache.commons:commons-lang3:jar -<span class="token operator">&gt;</span>\nversion <span class="token number">3.12</span>.0 vs <span class="token number">3.11</span> @ line <span class="token number">14</span>, <span class="token function">column</span> <span class="token number">15</span>\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> It is highly recommended to fix these problems because they threaten the stability of your build.\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> -------------\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building maven-duplicate-dependencies <span class="token number">0.0</span>.1-SNAPSHOT\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --------------------------------<span class="token punctuation">[</span> jar <span class="token punctuation">]</span>---------------------------------\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-dependency-plugin:2.8:analyze-duplicate <span class="token punctuation">(</span>default-cli<span class="token punctuation">)</span> @ maven-duplicate-dependencies ---\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> The artifact xml-apis:xml-apis:jar:2.0.2 has been relocated to xml-apis:xml-apis:jar:1.0.b2\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> List of duplicate dependencies defined <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token operator">&lt;</span>dependencies/<span class="token operator">&gt;</span><span class="token variable">`</span></span> <span class="token keyword">in</span> your pom.xml:\n        o org.apache.commons:commons-lang3:jar\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> BUILD SUCCESS\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Total time:  <span class="token number">0.835</span> s\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Finished at: <span class="token number">2021</span>-12-20T09:54:02+05:30\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这里，我们注意到，无论是_WARNING_还是_INFO_日志语句都提到了重复依赖的存在。</p><h2 id="_5-如果存在重复依赖则使构建失败" tabindex="-1"><a class="header-anchor" href="#_5-如果存在重复依赖则使构建失败"><span>5. 如果存在重复依赖则使构建失败</span></a></h2><p>在上述示例中，我们看到了如何检测重复依赖，但_BUILD_仍然成功。这可能导致使用错误的_jar_版本。</p><p><strong>使用Maven Enforcer插件，我们可以确保如果存在重复依赖，则构建不成功。</strong></p><p>为此，我们需要将此Maven插件添加到我们的_pom.xml_并添加规则_banDuplicatePomDependencyVersions_：</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code>``<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span><span class="token punctuation">&gt;</span></span>``\n  [...]\n  `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>`\n    `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>`\n      `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>`\n        ```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>```org.apache.maven.plugins```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>```\n        ```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>```maven-enforcer-plugin```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>```\n        ```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>```3.0.0```<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>```\n        `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>`\n          `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>`\n            `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>`no-duplicate-declared-dependencies`<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>`\n            `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>`\n              `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>`enforce`<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>`\n            `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>`\n            `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>`\n              `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rules</span><span class="token punctuation">&gt;</span></span>`\n                `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>banDuplicatePomDependencyVersions</span><span class="token punctuation">/&gt;</span></span>`\n              `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rules</span><span class="token punctuation">&gt;</span></span>`\n            `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>`\n          `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>`\n        `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>`\n      `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>`\n    `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>`\n  `<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>`\n  [...]\n``<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>``\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在，规则绑定了我们的Maven构建：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ mvn verify\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Scanning <span class="token keyword">for</span> projects<span class="token punctuation">..</span>.\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> Some problems were encountered <span class="token keyword">while</span> building the effective model <span class="token keyword">for</span> com.baeldung:maven-duplicate-dependencies:jar:0.0.1-SNAPSHOT\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> <span class="token string">&#39;dependencies.dependency.(groupId:artifactId:type:classifier)&#39;</span> must be unique: org.apache.commons:commons-lang3:jar -<span class="token operator">&gt;</span>\nversion <span class="token number">3.12</span>.0 vs <span class="token number">3.11</span> @ line <span class="token number">14</span>, <span class="token function">column</span> <span class="token number">14</span>\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> -------------\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Building maven-duplicate-dependencies <span class="token number">0.0</span>.1-SNAPSHOT\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --------------------------------<span class="token punctuation">[</span> jar <span class="token punctuation">]</span>---------------------------------\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> --- maven-enforcer-plugin:3.0.0:enforce <span class="token punctuation">(</span>no-duplicate-declared-dependencies<span class="token punctuation">)</span> @ maven-duplicate-dependencies ---\n<span class="token punctuation">[</span>WARNING<span class="token punctuation">]</span> Rule <span class="token number">0</span>: org.apache.maven.plugins.enforcer.BanDuplicatePomDependencyVersions failed with message:\nFound <span class="token number">1</span> duplicate dependency declaration <span class="token keyword">in</span> this project:\n - dependencies.dependency<span class="token punctuation">[</span>org.apache.commons:commons-lang3:jar<span class="token punctuation">]</span> <span class="token punctuation">(</span> <span class="token number">2</span> <span class="token builtin class-name">times</span> <span class="token punctuation">)</span>\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> BUILD FAILURE\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Total time:  <span class="token number">0.537</span> s\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Finished at: <span class="token number">2021</span>-12-20T09:55:46+05:30\n<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> ------------------------------------------------------------------------\n<span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.0.0:enforce <span class="token punctuation">(</span>no-duplicate-declared-dependencies<span class="token punctuation">)</span> on project maven-duplicate-dependencies: Some Enforcer rules have failed. Look above <span class="token keyword">for</span> specific messages explaining why the rule failed.\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-移除重复依赖" tabindex="-1"><a class="header-anchor" href="#_6-移除重复依赖"><span>6. 移除重复依赖</span></a></h2><p>一旦我们识别出重复依赖，最简单的方法是从_pom.xml_中删除它们，并只保留那些由我们的项目使用的唯一的依赖。</p><h2 id="_7-结论" tabindex="-1"><a class="header-anchor" href="#_7-结论"><span>7. 结论</span></a></h2><p>在本文中，我们学习了如何使用_mvn dependency:tree_和_mvn dependency:analyze-duplicate_命令在Maven中检测重复依赖。我们还看到了如何通过应用内置规则使用Maven Enforcer插件来使包含重复依赖的构建失败。</p>',28),c=[p];function o(l,i){return s(),a("div",null,c)}const k=n(e,[["render",o],["__file","2024-07-23-Remove Duplicate Dependencies with Maven.html.vue"]]),r=JSON.parse('{"path":"/posts/baeldung/2024-07-23/2024-07-23-Remove%20Duplicate%20Dependencies%20with%20Maven.html","title":"Maven中移除重复依赖","lang":"zh-CN","frontmatter":{"date":"2022-06-01T00:00:00.000Z","category":["Maven","教程"],"tag":["Maven","依赖管理"],"head":[["meta",{"name":"keywords","content":"Maven, 依赖管理, 重复依赖"}],["meta",{"property":"og:url","content":"https://www.kahen.xyz/posts/baeldung/2024-07-23/2024-07-23-Remove%20Duplicate%20Dependencies%20with%20Maven.html"}],["meta",{"property":"og:site_name","content":"Baeldung 中文网"}],["meta",{"property":"og:title","content":"Maven中移除重复依赖"}],["meta",{"property":"og:description","content":"Maven中移除重复依赖 在本教程中，我们将学习如何使用Maven命令在_pom.xml_中检测重复依赖。我们还将看到如何使用Maven Enforcer插件在存在重复依赖时使构建失败。 1. 概述 2. 为什么要检测重复依赖？ 在_pom.xml_中存在重复依赖的风险是，目标库的最新版本可能不会应用到我们项目的构建路径中。例如，考虑以下_pom.xm..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-23T09:24:56.000Z"}],["meta",{"property":"article:author","content":"Kahen"}],["meta",{"property":"article:tag","content":"Maven"}],["meta",{"property":"article:tag","content":"依赖管理"}],["meta",{"property":"article:published_time","content":"2022-06-01T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-23T09:24:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Maven中移除重复依赖\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-06-01T00:00:00.000Z\\",\\"dateModified\\":\\"2024-07-23T09:24:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Kahen\\",\\"url\\":\\"https://www.kahen.xyz\\"}]}"]],"description":"Maven中移除重复依赖 在本教程中，我们将学习如何使用Maven命令在_pom.xml_中检测重复依赖。我们还将看到如何使用Maven Enforcer插件在存在重复依赖时使构建失败。 1. 概述 2. 为什么要检测重复依赖？ 在_pom.xml_中存在重复依赖的风险是，目标库的最新版本可能不会应用到我们项目的构建路径中。例如，考虑以下_pom.xm..."},"headers":[{"level":2,"title":"1. 概述","slug":"_1-概述","link":"#_1-概述","children":[]},{"level":2,"title":"2. 为什么要检测重复依赖？","slug":"_2-为什么要检测重复依赖","link":"#_2-为什么要检测重复依赖","children":[]},{"level":2,"title":"3. 依赖树命令","slug":"_3-依赖树命令","link":"#_3-依赖树命令","children":[]},{"level":2,"title":"4. 依赖analyze-duplicate命令","slug":"_4-依赖analyze-duplicate命令","link":"#_4-依赖analyze-duplicate命令","children":[]},{"level":2,"title":"5. 如果存在重复依赖则使构建失败","slug":"_5-如果存在重复依赖则使构建失败","link":"#_5-如果存在重复依赖则使构建失败","children":[]},{"level":2,"title":"6. 移除重复依赖","slug":"_6-移除重复依赖","link":"#_6-移除重复依赖","children":[]},{"level":2,"title":"7. 结论","slug":"_7-结论","link":"#_7-结论","children":[]}],"git":{"createdTime":1721726696000,"updatedTime":1721726696000,"contributors":[{"name":"Kahen","email":"Kahen@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":3.74,"words":1122},"filePathRelative":"posts/baeldung/2024-07-23/2024-07-23-Remove Duplicate Dependencies with Maven.md","localizedDate":"2022年6月1日","excerpt":"<hr>\\n<h1>Maven中移除重复依赖</h1>\\n<p>在本教程中，我们将学习如何使用Maven命令在_pom.xml_中检测重复依赖。我们还将看到如何使用Maven Enforcer插件在存在重复依赖时使构建失败。</p>\\n<h2>1. 概述</h2>\\n<h2>2. 为什么要检测重复依赖？</h2>\\n<p>在_pom.xml_中存在重复依赖的风险是，目标库的最新版本可能不会应用到我们项目的构建路径中。例如，考虑以下_pom.xml_：</p>\\n<div class=\\"language-xml\\" data-ext=\\"xml\\" data-title=\\"xml\\"><pre class=\\"language-xml\\"><code>``<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>project</span><span class=\\"token punctuation\\">&gt;</span></span>``\\n  [...]\\n  `<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>dependencies</span><span class=\\"token punctuation\\">&gt;</span></span>`\\n    ``<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>dependency</span><span class=\\"token punctuation\\">&gt;</span></span>``\\n      ```<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>groupId</span><span class=\\"token punctuation\\">&gt;</span></span>```org.apache.commons```<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>groupId</span><span class=\\"token punctuation\\">&gt;</span></span>```\\n      ```<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>artifactId</span><span class=\\"token punctuation\\">&gt;</span></span>```commons-lang3```<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>artifactId</span><span class=\\"token punctuation\\">&gt;</span></span>```\\n      ```<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>version</span><span class=\\"token punctuation\\">&gt;</span></span>```3.12.0```<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>version</span><span class=\\"token punctuation\\">&gt;</span></span>```\\n    ``<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>dependency</span><span class=\\"token punctuation\\">&gt;</span></span>``\\n    ``<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>dependency</span><span class=\\"token punctuation\\">&gt;</span></span>``\\n      ```<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>groupId</span><span class=\\"token punctuation\\">&gt;</span></span>```org.apache.commons```<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>groupId</span><span class=\\"token punctuation\\">&gt;</span></span>```\\n      ```<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>artifactId</span><span class=\\"token punctuation\\">&gt;</span></span>```commons-lang3```<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>artifactId</span><span class=\\"token punctuation\\">&gt;</span></span>```\\n      ```<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>version</span><span class=\\"token punctuation\\">&gt;</span></span>```3.11```<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>version</span><span class=\\"token punctuation\\">&gt;</span></span>```\\n    ``<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>dependency</span><span class=\\"token punctuation\\">&gt;</span></span>``\\n  `<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>dependencies</span><span class=\\"token punctuation\\">&gt;</span></span>`\\n  [...]\\n``<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>project</span><span class=\\"token punctuation\\">&gt;</span></span>``\\n</code></pre></div>","autoDesc":true}');export{k as comp,r as data};
